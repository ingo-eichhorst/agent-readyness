# Requirements Archive: v0.0.2 Complete Analysis Framework

**Archived:** 2026-02-03
**Status:** ✅ SHIPPED

This is the archived requirements specification for v0.0.2.
For current requirements, see `.planning/REQUIREMENTS.md` (will be created for next milestone).

---

# Requirements: Agent Readiness Score (ARS)

**Defined:** 2026-02-01
**Core Value:** Accurate, evidence-based scoring that predicts agent success and identifies specific improvements teams should make before adopting AI coding agents.

## v2 Requirements

Requirements for v0.0.2 milestone: Complete Analysis Framework (multi-language + all 7 categories).

### Multi-Language Foundation

- [x] **LANG-01**: Detect Python projects (setup.py, pyproject.toml, requirements.txt, .py files) — ✓ v0.0.2
- [x] **LANG-02**: Detect TypeScript projects (tsconfig.json, package.json with typescript dep, .ts files) — ✓ v0.0.2
- [x] **LANG-03**: Parse Python files with Tree-sitter (tree-sitter-python) — ✓ v0.0.2
- [x] **LANG-04**: Parse TypeScript files with Tree-sitter (tree-sitter-typescript) — ✓ v0.0.2
- [x] **LANG-05**: Unified AnalysisTarget interface abstracts Go/Python/TypeScript differences — ✓ v0.0.2
- [x] **LANG-06**: Handle mixed-language repositories (analyze each language separately) — ✓ v0.0.2
- [x] **LANG-07**: Tree-sitter memory management (explicit Close() on parsers) — ✓ v0.0.2

### C2: Semantic Explicitness & Type Safety

**Go:**
- [x] **C2-GO-01**: Measure interface{}/any usage rate — ✓ v0.0.2
- [x] **C2-GO-02**: Check naming consistency (CamelCase for exports, camelCase for unexports) — ✓ v0.0.2
- [x] **C2-GO-03**: Detect magic numbers (numeric/string literals vs named constants) — ✓ v0.0.2
- [x] **C2-GO-04**: Analyze nil safety patterns (nil checks before dereference) — ✓ v0.0.2

**Python:**
- [x] **C2-PY-01**: Measure type annotation coverage (PEP 484/585 hints on functions/methods) — ✓ v0.0.2
- [x] **C2-PY-02**: Check naming consistency (snake_case adherence, PEP 8) — ✓ v0.0.2
- [x] **C2-PY-03**: Detect magic numbers — ✓ v0.0.2
- [x] **C2-PY-04**: Detect mypy/pyright configuration (strict mode) — ✓ v0.0.2

**TypeScript:**
- [x] **C2-TS-01**: Measure type annotation coverage (explicit types vs implicit/any) — ✓ v0.0.2
- [x] **C2-TS-02**: Check tsconfig.json strict mode flags — ✓ v0.0.2
- [x] **C2-TS-03**: Detect magic numbers — ✓ v0.0.2
- [x] **C2-TS-04**: Analyze null safety (optional chaining, nullable types) — ✓ v0.0.2

### C4: Documentation Quality

**Static metrics:**
- [x] **C4-01**: Check README.md presence and word count — ✓ v0.0.2
- [x] **C4-02**: Calculate inline comment density (% lines with comments) — ✓ v0.0.2
- [x] **C4-03**: Measure API documentation coverage (docstrings/JSDoc/godoc for public APIs) — ✓ v0.0.2
- [x] **C4-04**: Check CHANGELOG.md presence and last update date — ✓ v0.0.2
- [x] **C4-05**: Detect architectural diagrams (docs/ directory or embedded in README) — ✓ v0.0.2
- [x] **C4-06**: Detect example code presence (examples/ or README code blocks) — ✓ v0.0.2
- [x] **C4-07**: Check CONTRIBUTING.md or onboarding guide presence — ✓ v0.0.2

**LLM-based content quality:**
- [x] **C4-08**: Rate README clarity (1-10 scale via LLM judge) — ✓ v0.0.2
- [x] **C4-09**: Rate example code quality (runnable, clear, relevant) — ✓ v0.0.2
- [x] **C4-10**: Assess documentation completeness (missing critical sections) — ✓ v0.0.2
- [x] **C4-11**: Check cross-reference coherence (consistent terminology, valid links) — ✓ v0.0.2
- [x] **C4-12**: Implement sampling strategy (50-100 files max to control cost) — ✓ v0.0.2
- [x] **C4-13**: Implement prompt caching for repeated LLM calls — ✓ v0.0.2
- [x] **C4-14**: Show cost estimation before running LLM analysis — ✓ v0.0.2

### C5: Temporal & Operational Dynamics

- [x] **C5-01**: Parse git log with native git CLI (not go-git) — ✓ v0.0.2
- [x] **C5-02**: Calculate code churn rate (lines changed per commit, 90-day window) — ✓ v0.0.2
- [x] **C5-03**: Detect temporal coupling (files co-changed >70% of time) — ✓ v0.0.2
- [x] **C5-04**: Calculate author fragmentation (avg authors per file, 90-day window) — ✓ v0.0.2
- [x] **C5-05**: Calculate commit stability (median time between changes) — ✓ v0.0.2
- [x] **C5-06**: Calculate hotspot concentration (% changes in top 10% of files) — ✓ v0.0.2
- [x] **C5-07**: Fail gracefully if .git directory missing (clear error, not silent skip) — ✓ v0.0.2
- [x] **C5-08**: Performance optimization (default to 6-month history window) — ✓ v0.0.2

### C7: Agent Evaluation (LLM-as-Judge)

- [x] **C7-01**: Implement headless Claude Code integration (claude -p mode) — ✓ v0.0.2
- [x] **C7-02**: Define agent evaluation tasks (understand this code, propose refactor, add feature) — ✓ v0.0.2
- [x] **C7-03**: Measure intent clarity (agent's understanding of purpose) — ✓ v0.0.2
- [x] **C7-04**: Measure modification confidence (agent's safety assessment for refactoring) — ✓ v0.0.2
- [x] **C7-05**: Measure cross-file coherence (pattern consistency detection) — ✓ v0.0.2
- [x] **C7-06**: Measure semantic completeness (missing context detection) — ✓ v0.0.2
- [x] **C7-07**: Implement sampling strategy (20-50 functions stratified by complexity) — ✓ v0.0.2
- [x] **C7-08**: Show cost estimation and get confirmation before running — ✓ v0.0.2
- [x] **C7-09**: Handle agent errors and timeouts gracefully — ✓ v0.0.2
- [x] **C7-10**: Opt-in flag (--agent-eval or --enable-c7) — ✓ v0.0.2

### Python-Specific Analysis

- [x] **PY-01**: C1 cyclomatic complexity for Python (via Tree-sitter) — ✓ v0.0.2
- [x] **PY-02**: C1 function length for Python — ✓ v0.0.2
- [x] **PY-03**: C1 file size for Python — ✓ v0.0.2
- [x] **PY-04**: C1 duplication detection for Python (token-based hashing) — ✓ v0.0.2
- [x] **PY-05**: C3 import graph analysis for Python — ✓ v0.0.2
- [x] **PY-06**: C3 dead code detection for Python (unreferenced definitions) — ✓ v0.0.2
- [x] **PY-07**: C3 directory depth for Python — ✓ v0.0.2
- [x] **PY-08**: C6 test detection (pytest, unittest frameworks) — ✓ v0.0.2
- [x] **PY-09**: C6 coverage parsing (coverage.py XML output) — ✓ v0.0.2

### TypeScript-Specific Analysis

- [x] **TS-01**: C1 cyclomatic complexity for TypeScript — ✓ v0.0.2
- [x] **TS-02**: C1 function length for TypeScript — ✓ v0.0.2
- [x] **TS-03**: C1 file size for TypeScript — ✓ v0.0.2
- [x] **TS-04**: C1 duplication detection for TypeScript — ✓ v0.0.2
- [x] **TS-05**: C3 import graph analysis for TypeScript — ✓ v0.0.2
- [x] **TS-06**: C3 dead code detection for TypeScript — ✓ v0.0.2
- [x] **TS-07**: C3 directory depth for TypeScript — ✓ v0.0.2
- [x] **TS-08**: C6 test detection (Jest, Mocha, Vitest frameworks) — ✓ v0.0.2
- [x] **TS-09**: C6 coverage parsing (Istanbul/NYC lcov output) — ✓ v0.0.2

### Scoring & Configuration

- [x] **SCORE-01**: Update composite score to include all 7 categories with PRD weights — ✓ v0.0.2
- [x] **SCORE-02**: Rebalance weights when categories unavailable (C7 opt-out redistributes) — ✓ v0.0.2
- [x] **SCORE-03**: Parse .arsrc.yml configuration file — ✓ v0.0.2
- [x] **SCORE-04**: Support custom category weights in config — ✓ v0.0.2
- [x] **SCORE-05**: Support custom metric thresholds in config — ✓ v0.0.2
- [x] **SCORE-06**: Support per-language threshold overrides — ✓ v0.0.2
- [x] **SCORE-07**: Support metric enable/disable flags in config — ✓ v0.0.2
- [x] **SCORE-08**: Validate config schema with clear error messages — ✓ v0.0.2

### HTML Reports

- [x] **HTML-01**: Generate HTML report with html/template — ✓ v0.0.2
- [x] **HTML-02**: Radar chart for composite + per-category scores (inline SVG or ECharts) — ✓ v0.0.2
- [x] **HTML-03**: Metric breakdown tables with thresholds and actual values — ✓ v0.0.2
- [x] **HTML-04**: Research citations for each metric (linked to papers) — ✓ v0.0.2
- [x] **HTML-05**: Impact explanations for each metric (why it matters for agents) — ✓ v0.0.2
- [x] **HTML-06**: Top 5 recommendations embedded in report — ✓ v0.0.2
- [x] **HTML-07**: Trend comparison chart (if --baseline provided) — ✓ v0.0.2
- [x] **HTML-08**: Self-contained single file (no external CSS/JS dependencies) — ✓ v0.0.2
- [x] **HTML-09**: Polished, technical design (avoid generic AI aesthetic) — ✓ v0.0.2
- [x] **HTML-10**: XSS protection (use html/template escaping, never template.HTML with user data) — ✓ v0.0.2

### CLI & Integration

- [x] **CLI-01**: Add --enable-c4-llm flag for C4 LLM analysis (opt-in) — ✓ v0.0.2
- [x] **CLI-02**: Add --enable-c7 flag for C7 agent evaluation (opt-in) — ✓ v0.0.2
- [x] **CLI-03**: Add --output-html flag to generate HTML report — ✓ v0.0.2
- [x] **CLI-04**: Add --config flag to specify .arsrc.yml path — ✓ v0.0.2
- [x] **CLI-05**: Add --baseline flag for trend comparison — ✓ v0.0.2
- [x] **CLI-06**: Show cost estimation for LLM features before execution — ✓ v0.0.2
- [x] **CLI-07**: Update --verbose to show per-language analysis details — ✓ v0.0.2
- [x] **CLI-08**: Maintain <30s performance for non-LLM analysis (C1-C3, C5-C6) — ✓ v0.0.2

## Traceability

All 95 v0.0.2 requirements mapped to phases 6-12 and verified complete per milestone audit.

| Requirement | Phase | Status |
|-------------|-------|--------|
| All LANG-* (7) | Phase 6 | ✓ Complete |
| All C2-* (18) | Phase 6 | ✓ Complete |
| All PY-* (9) | Phase 7 | ✓ Complete |
| All TS-* (9) | Phase 7 | ✓ Complete |
| All C5-* (8) | Phase 8 | ✓ Complete |
| All C4-* (14) | Phase 9 | ✓ Complete |
| All HTML-* (10) | Phase 9 | ✓ Complete |
| All C7-* (10) | Phase 10 | ✓ Complete |
| All SCORE-* (8) | Phase 6 | ✓ Complete |
| All CLI-* (8) | Phases 6, 9, 10 | ✓ Complete |

**Coverage:** 95/95 requirements (100%)

---

## Milestone Summary

**Shipped:** 95 of 95 v0.0.2 requirements
**Adjusted:** None - all requirements delivered as specified
**Dropped:** None - no requirements removed during implementation

**Technical Achievements:**
- Unified multi-language abstraction (AnalysisTarget interface)
- Tree-sitter integration with thread-safe parser
- Native git CLI for 10-100x faster temporal analysis
- LLM-as-judge pattern for agent evaluation
- Cost-transparent opt-in LLM features
- Self-contained HTML reports with embedded SVG charts
- Git worktree isolation for safe agent execution

**Quality Indicators:**
- 100+ tests across 11 packages
- Zero anti-patterns in production code
- XSS protection verified for HTML output
- Graceful degradation for unavailable features
- Performance <30s maintained for static analysis

---

*Archived: 2026-02-03 as part of v0.0.2 milestone completion*
