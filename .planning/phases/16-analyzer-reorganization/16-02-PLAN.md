---
phase: 16-analyzer-reorganization
plan: 02
type: execute
wave: 2
depends_on: ["16-01"]
files_modified:
  - internal/analyzer/c1_code_quality/analyzer.go
  - internal/analyzer/c1_code_quality/codehealth.go
  - internal/analyzer/c1_code_quality/python.go
  - internal/analyzer/c1_code_quality/typescript.go
  - internal/analyzer/c1_code_quality/codehealth_test.go
  - internal/analyzer/c1_code_quality/python_test.go
  - internal/analyzer/c1_code_quality/typescript_test.go
  - internal/analyzer/c2_semantics/analyzer.go
  - internal/analyzer/c2_semantics/semantics.go
  - internal/analyzer/c2_semantics/go.go
  - internal/analyzer/c2_semantics/python.go
  - internal/analyzer/c2_semantics/typescript.go
  - internal/analyzer/c2_semantics/go_test.go
  - internal/analyzer/c2_semantics/python_test.go
  - internal/analyzer/c2_semantics/typescript_test.go
  - internal/analyzer/c3_architecture/analyzer.go
  - internal/analyzer/c3_architecture/architecture.go
  - internal/analyzer/c3_architecture/python.go
  - internal/analyzer/c3_architecture/typescript.go
  - internal/analyzer/c3_architecture/architecture_test.go
  - internal/analyzer/c3_architecture/python_test.go
  - internal/analyzer/c3_architecture/typescript_test.go
  - internal/analyzer/c4_documentation/analyzer.go
  - internal/analyzer/c4_documentation/documentation.go
  - internal/analyzer/c4_documentation/documentation_test.go
  - internal/analyzer/c5_temporal/analyzer.go
  - internal/analyzer/c5_temporal/temporal.go
  - internal/analyzer/c5_temporal/temporal_test.go
  - internal/analyzer/c6_testing/analyzer.go
  - internal/analyzer/c6_testing/testing.go
  - internal/analyzer/c6_testing/python.go
  - internal/analyzer/c6_testing/typescript.go
  - internal/analyzer/c6_testing/testing_test.go
  - internal/analyzer/c6_testing/python_test.go
  - internal/analyzer/c6_testing/typescript_test.go
  - internal/analyzer/c7_agent/analyzer.go
  - internal/analyzer/c7_agent/agent.go
  - internal/analyzer/c7_agent/agent_test.go
autonomous: true

must_haves:
  truths:
    - "All analyzer files moved to category subdirectories"
    - "All import paths work correctly"
    - "All tests pass after reorganization"
    - "Pipeline imports analyzer package unchanged"
  artifacts:
    - path: "internal/analyzer/c1_code_quality/analyzer.go"
      provides: "C1Analyzer type and NewC1Analyzer constructor"
      exports: ["C1Analyzer", "NewC1Analyzer"]
    - path: "internal/analyzer/c2_semantics/analyzer.go"
      provides: "C2Analyzer type and NewC2Analyzer constructor"
      exports: ["C2Analyzer", "NewC2Analyzer"]
    - path: "internal/analyzer/c7_agent/analyzer.go"
      provides: "C7Analyzer type and NewC7Analyzer constructor"
      exports: ["C7Analyzer", "NewC7Analyzer"]
  key_links:
    - from: "internal/pipeline/pipeline.go"
      to: "internal/analyzer"
      via: "import unchanged"
      pattern: '"github.com/ingo/agent-readyness/internal/analyzer"'
    - from: "internal/analyzer/c1_code_quality/python.go"
      to: "internal/analyzer"
      via: "shared utilities import"
      pattern: 'analyzer\.(WalkTree|NodeText)'
---

<objective>
Move all analyzer files to their category subdirectories, update package declarations and imports, and verify the entire codebase still builds and tests pass.

Purpose: Complete the reorganization so each category has its own package while maintaining backward compatibility through root-level re-exports.
Output: All 31 analyzer files reorganized into 7 category subdirectories, all tests passing.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-analyzer-reorganization/16-RESEARCH.md
@.planning/phases/16-analyzer-reorganization/16-01-SUMMARY.md

# Root-level files from Plan 01
@internal/analyzer/shared.go
@internal/analyzer/analyzer.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Move C1 category files</name>
  <files>
    internal/analyzer/c1_code_quality/codehealth.go
    internal/analyzer/c1_code_quality/python.go
    internal/analyzer/c1_code_quality/typescript.go
    internal/analyzer/c1_code_quality/codehealth_test.go
    internal/analyzer/c1_code_quality/python_test.go
    internal/analyzer/c1_code_quality/typescript_test.go
  </files>
  <action>
Move C1 category files to c1_code_quality/ subdirectory.

**File Mapping (drop c1_ prefix):**
- c1_codehealth.go -> c1_code_quality/codehealth.go
- c1_python.go -> c1_code_quality/python.go
- c1_typescript.go -> c1_code_quality/typescript.go
- c1_codehealth_test.go -> c1_code_quality/codehealth_test.go
- c1_python_test.go -> c1_code_quality/python_test.go
- c1_typescript_test.go -> c1_code_quality/typescript_test.go

**For each moved file, apply these changes:**

1. Change package declaration from `package analyzer` to `package c1`

2. Add import for parent package to access shared utilities:
   ```go
   "github.com/ingo/agent-readyness/internal/analyzer"
   ```

3. Update shared utility calls (Plan 01 already capitalized these, now add package prefix):
   - `NodeText(...)` -> `analyzer.NodeText(...)`
   - `WalkTree(...)` -> `analyzer.WalkTree(...)`
   - `BuildImportGraph(...)` -> `analyzer.BuildImportGraph(...)`
   - `ImportGraph` type -> `analyzer.ImportGraph`

**Files requiring shared utility updates:**
| File | Shared Utilities Used |
|------|----------------------|
| c1_code_quality/python.go | NodeText -> analyzer.NodeText |
| c1_code_quality/typescript.go | NodeText -> analyzer.NodeText |

4. For pyFilterSourceFiles and tsFilterSourceFiles:
   - These are used within C1 only at this stage
   - Keep them in the C1 package (will duplicate to C3 in Task 2 if needed)

Delete original files from root after successful move.
  </action>
  <verify>
`go build ./internal/analyzer/c1_code_quality/...` succeeds
`go test ./internal/analyzer/c1_code_quality/...` passes
  </verify>
  <done>
C1 files moved to c1_code_quality/. Package declarations updated to `package c1`. Shared utility calls use `analyzer.*` prefix. Original c1_*.go files deleted from root.
  </done>
</task>

<task type="auto">
  <name>Task 2: Move C2-C3 category files</name>
  <files>
    internal/analyzer/c2_semantics/semantics.go
    internal/analyzer/c2_semantics/go.go
    internal/analyzer/c2_semantics/python.go
    internal/analyzer/c2_semantics/typescript.go
    internal/analyzer/c2_semantics/go_test.go
    internal/analyzer/c2_semantics/python_test.go
    internal/analyzer/c2_semantics/typescript_test.go
    internal/analyzer/c3_architecture/architecture.go
    internal/analyzer/c3_architecture/python.go
    internal/analyzer/c3_architecture/typescript.go
    internal/analyzer/c3_architecture/architecture_test.go
    internal/analyzer/c3_architecture/python_test.go
    internal/analyzer/c3_architecture/typescript_test.go
  </files>
  <action>
Move C2 and C3 category files to their subdirectories.

**C2 File Mapping:**
- c2_semantics.go -> c2_semantics/semantics.go (this is the dispatcher)
- c2_go.go -> c2_semantics/go.go
- c2_python.go -> c2_semantics/python.go
- c2_typescript.go -> c2_semantics/typescript.go
- c2_go_test.go -> c2_semantics/go_test.go
- c2_python_test.go -> c2_semantics/python_test.go
- c2_typescript_test.go -> c2_semantics/typescript_test.go

**C3 File Mapping:**
- c3_architecture.go -> c3_architecture/architecture.go
- c3_python.go -> c3_architecture/python.go
- c3_typescript.go -> c3_architecture/typescript.go
- c3_architecture_test.go -> c3_architecture/architecture_test.go
- c3_python_test.go -> c3_architecture/python_test.go
- c3_typescript_test.go -> c3_architecture/typescript_test.go

**For each moved file, apply these changes:**

1. Change package declaration:
   - C2 files: `package analyzer` -> `package c2`
   - C3 files: `package analyzer` -> `package c3`

2. Add import for parent package to access shared utilities:
   ```go
   "github.com/ingo/agent-readyness/internal/analyzer"
   ```

3. Update shared utility calls (add package prefix):

**C2 files requiring shared utility updates:**
| File | Shared Utilities Used |
|------|----------------------|
| c2_semantics/python.go | WalkTree -> analyzer.WalkTree, NodeText -> analyzer.NodeText, CountLines -> analyzer.CountLines |
| c2_semantics/typescript.go | WalkTree -> analyzer.WalkTree, NodeText -> analyzer.NodeText, CountLines -> analyzer.CountLines |

**C3 files requiring shared utility updates:**
| File | Shared Utilities Used |
|------|----------------------|
| c3_architecture/architecture.go | BuildImportGraph -> analyzer.BuildImportGraph, ImportGraph -> analyzer.ImportGraph |
| c3_architecture/python.go | WalkTree -> analyzer.WalkTree, NodeText -> analyzer.NodeText |
| c3_architecture/typescript.go | WalkTree -> analyzer.WalkTree, NodeText -> analyzer.NodeText |

4. For pyFilterSourceFiles and tsFilterSourceFiles in C3:
   - Duplicate these ~20-line functions from C1 into C3 package
   - This avoids cross-category import (c3 importing c1)
   - Per RESEARCH.md recommendation: "Duplicate them (they're small, avoids cross-category dependency)"

Delete original files from root after successful move.
  </action>
  <verify>
`go build ./internal/analyzer/c2_semantics/... ./internal/analyzer/c3_architecture/...` succeeds
`go test ./internal/analyzer/c2_semantics/... ./internal/analyzer/c3_architecture/...` passes
  </verify>
  <done>
C2, C3 files moved to subdirectories. Package declarations updated. Shared utility calls use `analyzer.*` prefix. Filter functions duplicated in C3. Original c2_*.go and c3_*.go files deleted from root.
  </done>
</task>

<task type="auto">
  <name>Task 3: Move C4-C7 category files</name>
  <files>
    internal/analyzer/c4_documentation/documentation.go
    internal/analyzer/c4_documentation/documentation_test.go
    internal/analyzer/c5_temporal/temporal.go
    internal/analyzer/c5_temporal/temporal_test.go
    internal/analyzer/c6_testing/testing.go
    internal/analyzer/c6_testing/python.go
    internal/analyzer/c6_testing/typescript.go
    internal/analyzer/c6_testing/testing_test.go
    internal/analyzer/c6_testing/python_test.go
    internal/analyzer/c6_testing/typescript_test.go
    internal/analyzer/c7_agent/agent.go
    internal/analyzer/c7_agent/agent_test.go
  </files>
  <action>
Move C4, C5, C6, C7 category files to their subdirectories.

**File Mapping:**
- c4_documentation.go -> c4_documentation/documentation.go
- c4_documentation_test.go -> c4_documentation/documentation_test.go
- c5_temporal.go -> c5_temporal/temporal.go
- c5_temporal_test.go -> c5_temporal/temporal_test.go
- c6_testing.go -> c6_testing/testing.go
- c6_python.go -> c6_testing/python.go
- c6_typescript.go -> c6_testing/typescript.go
- c6_testing_test.go -> c6_testing/testing_test.go
- c6_python_test.go -> c6_testing/python_test.go
- c6_typescript_test.go -> c6_testing/typescript_test.go
- c7_agent.go -> c7_agent/agent.go
- c7_agent_test.go -> c7_agent/agent_test.go

**For each moved file, apply these changes:**

1. Change package declaration:
   - C4 files: `package c4`
   - C5 files: `package c5`
   - C6 files: `package c6`
   - C7 files: `package c7`

2. Add import for parent package where shared utilities are used:
   ```go
   "github.com/ingo/agent-readyness/internal/analyzer"
   ```

3. Update shared utility calls:

**C6 files requiring shared utility updates:**
| File | Shared Utilities Used |
|------|----------------------|
| c6_testing/python.go | WalkTree -> analyzer.WalkTree, NodeText -> analyzer.NodeText |
| c6_testing/typescript.go | WalkTree -> analyzer.WalkTree, NodeText -> analyzer.NodeText |

**Note:** C4, C5, C7 do not use tree-sitter helpers (they use different mechanisms):
- C4: Uses LLM/regex analysis, no tree-sitter
- C5: Uses git commands, no tree-sitter
- C7: Uses Claude CLI, no tree-sitter

4. For pyFilterSourceFiles/tsFilterSourceFiles in C6 (if used):
   - Duplicate from C1 if needed
   - Check c6_python.go and c6_typescript.go for these functions

Delete original files from root after successful move.
  </action>
  <verify>
`go build ./internal/analyzer/c4_documentation/... ./internal/analyzer/c5_temporal/... ./internal/analyzer/c6_testing/... ./internal/analyzer/c7_agent/...` succeeds
`go test ./internal/analyzer/c4_documentation/... ./internal/analyzer/c5_temporal/... ./internal/analyzer/c6_testing/... ./internal/analyzer/c7_agent/...` passes
  </verify>
  <done>
C4, C5, C6, C7 files moved to subdirectories. Package declarations updated. C6 shared utility calls use `analyzer.*` prefix. Original c4_*.go, c5_*.go, c6_*.go, c7_*.go files deleted from root.
  </done>
</task>

<task type="auto">
  <name>Task 4: Verify full build and test suite</name>
  <files>None (verification only)</files>
  <action>
Run comprehensive verification:

1. Full build: `go build ./...`
   - Verifies all imports resolve
   - Verifies analyzer.go re-exports work
   - Verifies pipeline.go still compiles unchanged

2. Full test suite: `go test ./...`
   - All 100+ tests must pass
   - Pay attention to any test failures in analyzer packages

3. Verify no old files remain: `ls internal/analyzer/*.go`
   - Should only show: analyzer.go, shared.go
   - All c{N}_*.go files should be gone

4. Run `go mod tidy` to clean up any import changes

If any failures:
- Check import paths
- Verify type aliases use `=` (type T = pkg.T)
- Verify shared utility calls use analyzer.* prefix
- Check for missing filter function duplicates
  </action>
  <verify>
`go build ./...` exits 0
`go test ./...` shows all tests pass
`ls internal/analyzer/*.go` shows only analyzer.go and shared.go
  </verify>
  <done>
Full codebase builds successfully. All tests pass. No old analyzer files remain at root level. Reorganization complete.
  </done>
</task>

</tasks>

<verification>
1. `go build ./...` succeeds
2. `go test ./...` - all tests pass
3. `ls internal/analyzer/` shows: analyzer.go, shared.go, and 7 subdirectories
4. `ls internal/analyzer/c1_code_quality/` shows: codehealth.go, python.go, typescript.go, and their tests
5. `grep -r "package analyzer" internal/analyzer/` only matches root-level files
6. `grep "analyzer.NewC1Analyzer" internal/pipeline/pipeline.go` still works (backward compat)
</verification>

<success_criteria>
- All 31 original analyzer files removed from root
- All files reorganized into 7 category subdirectories
- Package declarations updated (c1, c2, ..., c7)
- Shared utility imports use analyzer.* prefix
- `go build ./...` succeeds
- `go test ./...` all tests pass
- pipeline.go unchanged (imports analyzer, uses NewCxAnalyzer)
</success_criteria>

<output>
After completion, create `.planning/phases/16-analyzer-reorganization/16-02-SUMMARY.md`
</output>
