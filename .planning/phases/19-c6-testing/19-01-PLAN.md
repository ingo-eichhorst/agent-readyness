---
phase: 19-c6-testing
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [internal/output/descriptions.go, internal/output/citations.go]
autonomous: true

must_haves:
  truths:
    - "All 5 C6 metrics have inline citations with (Author, Year) format"
    - "C6 References section contains complete citations with verified URLs"
    - "Every quantified claim in C6 descriptions has explicit attribution"
    - "Citation density is 2-3 per metric with foundational and AI-era balance"
  artifacts:
    - path: "internal/output/descriptions.go"
      provides: "C6 metric descriptions with inline citations"
      contains: "Nagappan et al., 2008"
    - path: "internal/output/citations.go"
      provides: "C6 reference entries"
      contains: "Meszaros"
  key_links:
    - from: "descriptions.go test_to_code_ratio"
      to: "citations.go C6 Beck/Nagappan entry"
      via: "matching Author, Year format"
      pattern: "Beck, 2002.*Nagappan"
    - from: "descriptions.go coverage_percent"
      to: "citations.go C6 Inozemtseva entry"
      via: "matching Author, Year format"
      pattern: "Inozemtseva.*Holmes.*2014"
---

<objective>
Add research-backed citations to all 5 C6 Testing metrics following established quality protocols from Phase 18.

Purpose: Complete C6 as the second category (after C1) with scientific foundations, establishing the pattern for remaining categories C2-C5 and C7.
Output: Updated descriptions.go with inline citations for all C6 metrics, expanded citations.go with 6+ additional C6 reference entries.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-c6-testing/19-RESEARCH.md
@.planning/phases/18-c1-code-health/18-02-SUMMARY.md
@internal/output/descriptions.go
@internal/output/citations.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update C6 metric descriptions with inline citations</name>
  <files>internal/output/descriptions.go</files>
  <action>
Update all 5 C6 metric descriptions following the pattern established in 18-02-SUMMARY.md:

**test_to_code_ratio:**
- Brief: Add citation for 40-90% defect reduction claim: `(Nagappan et al., 2008)`
- Detailed: Add Research Evidence section citing Beck (2002) for TDD methodology, Nagappan et al. (2008) for empirical 40-90% defect reduction with 15-35% time tradeoff, Borg et al. (2026) for AI agent relevance

**coverage_percent:**
- Brief: Update existing Mockus citation, add nuance about correlation
- Detailed: Add Research Evidence section with BOTH coverage perspectives:
  - Inozemtseva & Holmes (2014): "low to moderate correlation" when controlling for suite size
  - Mockus et al. (2009): coverage increase associates with fewer field defects
  - Use hedged language: "correlates with" not "guarantees"
- Note coverage controversy in description

**test_isolation:**
- Brief: Add Meszaros (2007) citation for test doubles
- Detailed: Add Research Evidence section citing:
  - Meszaros (2007) for test doubles and SUT isolation patterns
  - Beck (2002) for isolated tests run reliably and fast
  - Luo et al. (2014) for flaky test taxonomy (shared state causes)

**assertion_density_avg:**
- Brief: Update to cite Kudrjavets et al. (2006) with context about production assertions
- Detailed: Add Research Evidence section noting:
  - Kudrjavets et al. (2006): assertion density negatively correlates with fault density (production code context)
  - Beck (2002): tests verify behavior, not just execute code
  - Note difference between production assertions and test assertions

**test_file_ratio:**
- Brief: Add Meszaros (2007) for test organization patterns
- Detailed: Add Research Evidence section citing:
  - Meszaros (2007) for systematic test organization
  - Beck (2002) for TDD-driven test structure
  - Borg et al. (2026) for AI agent comprehension of organized code

Use `<span class="citation">(Author, Year)</span>` format for all inline citations.
Ensure each metric has at least 1 foundational (pre-2021) and 1 AI-era (2021+) citation.
  </action>
  <verify>
Run: `grep -c "citation.*C6\|test_to_code_ratio\|coverage_percent\|test_isolation\|assertion_density\|test_file_ratio" internal/output/descriptions.go`
Confirm: Each C6 metric has at least 2 inline citations visible
Run: `go build ./...` passes
  </verify>
  <done>All 5 C6 metrics have inline citations with Research Evidence sections following C1 pattern</done>
</task>

<task type="auto">
  <name>Task 2: Add C6 reference entries to citations.go</name>
  <files>internal/output/citations.go</files>
  <action>
Expand C6 section in researchCitations slice. Keep existing Beck (2002) and Mockus (2009) entries, add:

```go
// Add after existing C6 entries (Beck, Mockus)
{
    Category:    "C6",
    Title:       "xUnit Test Patterns: Refactoring Test Code",
    Authors:     "Meszaros",
    Year:        2007,
    URL:         "https://martinfowler.com/books/meszaros.html",
    Description: "Test doubles, isolation patterns, and test code smells",
},
{
    Category:    "C6",
    Title:       "Realizing quality improvement through test driven development",
    Authors:     "Nagappan et al.",
    Year:        2008,
    URL:         "https://doi.org/10.1007/s10664-008-9062-z",
    Description: "40-90% defect reduction in industrial TDD teams at Microsoft/IBM",
},
{
    Category:    "C6",
    Title:       "Coverage is not strongly correlated with test suite effectiveness",
    Authors:     "Inozemtseva & Holmes",
    Year:        2014,
    URL:         "https://doi.org/10.1145/2568225.2568271",
    Description: "Low-moderate correlation between coverage and fault detection when controlling for suite size",
},
{
    Category:    "C6",
    Title:       "An empirical analysis of flaky tests",
    Authors:     "Luo et al.",
    Year:        2014,
    URL:         "https://doi.org/10.1145/2635868.2635920",
    Description: "Taxonomy of flaky test causes including shared state and external dependencies",
},
{
    Category:    "C6",
    Title:       "Assessing the Relationship between Software Assertions and Code Quality",
    Authors:     "Kudrjavets et al.",
    Year:        2006,
    URL:         "https://www.microsoft.com/en-us/research/publication/assessing-the-relationship-between-software-assertions-and-code-qualityan-empirical-investigation/",
    Description: "Assertion density in production code negatively correlates with fault density",
},
{
    Category:    "C6",
    Title:       "Code for Machines, Not Just Humans: Quantifying AI-Friendliness with Code Health Metrics",
    Authors:     "Borg et al.",
    Year:        2026,
    URL:         "https://arxiv.org/abs/2601.02200",
    Description: "Code health metrics including test quality predict AI agent reliability",
},
```

Note: Borg et al. (2026) may already exist in C1 section - add as C6 entry anyway for category self-containment (same pattern as Parnas/Gamma in C1/C3).

Update existing Mockus entry URL to use DOI format: `https://doi.org/10.1109/ESEM.2009.5315981`
  </action>
  <verify>
Run: `grep -c "Category.*C6" internal/output/citations.go`
Confirm: At least 8 C6 citation entries (Beck, Mockus + 6 new)
Run: `go build ./...` passes
  </verify>
  <done>C6 References section contains 8 entries covering Beck, Mockus, Meszaros, Nagappan, Inozemtseva, Luo, Kudrjavets, Borg</done>
</task>

<task type="auto">
  <name>Task 3: Verify all C6 citation URLs are accessible</name>
  <files></files>
  <action>
Verify each C6 citation URL is accessible using curl with browser User-Agent (to bypass bot protection):

URLs to verify:
1. Beck (2002): https://www.pearson.com/en-us/subject-catalog/p/test-driven-development-by-example/P200000009480
2. Mockus (2009): https://doi.org/10.1109/ESEM.2009.5315981
3. Meszaros (2007): https://martinfowler.com/books/meszaros.html
4. Nagappan (2008): https://doi.org/10.1007/s10664-008-9062-z
5. Inozemtseva (2014): https://doi.org/10.1145/2568225.2568271
6. Luo (2014): https://doi.org/10.1145/2635868.2635920
7. Kudrjavets (2006): https://www.microsoft.com/en-us/research/publication/assessing-the-relationship-between-software-assertions-and-code-qualityan-empirical-investigation/
8. Borg (2026): https://arxiv.org/abs/2601.02200

Use: `curl -I -A "Mozilla/5.0" [URL]` to check HTTP status
For DOI URLs: Verify they resolve (302/301 redirect is success)
For ACM/IEEE: DOI format is permanent, 403 bot protection is expected for automated requests

Document any issues found. If a URL is inaccessible, find alternative (DOI preferred, then open-access version).
  </action>
  <verify>
All 8 URLs return HTTP 200 or 3xx redirect (DOI resolution)
No broken links
  </verify>
  <done>All C6 citation URLs verified accessible or DOI resolution confirmed</done>
</task>

</tasks>

<verification>
1. `go build ./...` passes
2. `go test ./internal/output/...` passes (if tests exist)
3. All 5 C6 metrics in descriptions.go have inline citations
4. At least 8 C6 entries in citations.go
5. All URLs verified accessible
</verification>

<success_criteria>
- All 5 C6 metrics have inline citations referencing foundational TDD/coverage research and AI-era studies
- C6 References section contains 8 complete citations with verified, accessible URLs
- Citation density follows style guide (2-3 per metric, prioritizing seminal works)
- Every quantified claim in C6 metric descriptions has explicit source attribution
- Coverage controversy (Inozemtseva vs Mockus) is acknowledged in coverage_percent description
</success_criteria>

<output>
After completion, create `.planning/phases/19-c6-testing/19-01-SUMMARY.md`
</output>
