---
phase: 21-c3-architecture
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [internal/output/descriptions.go, internal/output/citations.go]
autonomous: true

must_haves:
  truths:
    - "All 5 C3 metrics have inline citations with (Author, Year) format"
    - "C3 References section contains complete citations with verified URLs"
    - "Every quantified claim in C3 descriptions has explicit attribution"
    - "Martin's principles are labeled as influential practitioner perspective, not peer-reviewed research"
  artifacts:
    - path: "internal/output/descriptions.go"
      provides: "C3 metric descriptions with inline citations"
      contains: "Parnas, 1972"
    - path: "internal/output/citations.go"
      provides: "C3 reference entries"
      contains: "Stevens, Myers & Constantine"
  key_links:
    - from: "descriptions.go max_dir_depth"
      to: "citations.go C3 Parnas/MacCormack entry"
      via: "matching Author, Year format"
      pattern: "Parnas.*1972.*MacCormack.*2006"
    - from: "descriptions.go circular_deps"
      to: "citations.go C3 Oyetoyan entry"
      via: "matching Author, Year format"
      pattern: "Oyetoyan.*2015"
---

<objective>
Add research-backed citations to all 5 C3 Architecture metrics following established quality protocols from Phase 18.

Purpose: Complete C3 with scientific foundations, continuing the citation pattern established in C1, C6, and C2 phases. Distinguish between peer-reviewed research (Parnas, Stevens et al., Chidamber & Kemerer) and influential practitioner perspective (Martin).
Output: Updated descriptions.go with inline citations for all C3 metrics, expanded citations.go with additional C3 reference entries.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-c3-architecture/21-RESEARCH.md
@.planning/phases/20-c2-semantic-explicitness/20-01-SUMMARY.md
@internal/output/descriptions.go
@internal/output/citations.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update C3 metric descriptions with inline citations</name>
  <files>internal/output/descriptions.go</files>
  <action>
Update all 5 C3 metric descriptions following the pattern established in prior phases (18-02, 19-01, 20-01):

**max_dir_depth:**
- Brief: Add Parnas (1972) citation for module decomposition principles
- Detailed: Add Research Evidence section citing:
  - Parnas (1972) for foundational module decomposition and information hiding
  - MacCormack et al. (2006) for empirical DSM analysis validating modularity benefits
  - Borg et al. (2026) for AI agent comprehension of well-organized code

**module_fanout_avg:**
- Brief: Add Stevens et al. (1974) citation for coupling foundations
- Detailed: Add Research Evidence section citing:
  - Stevens, Myers & Constantine (1974) for original coupling/cohesion definitions
  - Chidamber & Kemerer (1994) for CBO metric: excessive coupling detrimental to modular design
  - Martin (2003) for Stable Dependencies Principle (label as "influential practitioner perspective")
  - Borg et al. (2026) for highly-coupled code increasing agent break rates

**circular_deps:**
- Brief: Add Lakos (1996) citation for acyclic designs
- Detailed: Add Research Evidence section citing:
  - Parnas (1972) for clear dependency direction in modular systems
  - Martin (2003) for Acyclic Dependencies Principle (label as "influential practitioner perspective, widely adopted in industry, though not derived from empirical research")
  - Lakos (1996) for practical techniques eliminating cyclic dependencies
  - Oyetoyan et al. (2015) for empirical study: circular dependencies correlate with higher change frequency
  - Borg et al. (2026) for architectural complexity impacting agent reliability

**import_complexity_avg:**
- Brief: Add Sangal et al. (2005) citation for dependency management
- Detailed: Add Research Evidence section citing:
  - Parnas (1972) for clear module boundaries improving comprehension
  - Sangal et al. (2005) for DSM approach to managing complex dependencies
  - Pisch et al. (2024) for M-score: dependency density predicts maintainability
  - Borg et al. (2026) for structural complexity impacting agent comprehension

**dead_exports:**
- Brief: Add Fowler et al. (1999) citation for Dead Code as code smell
- Detailed: Add Research Evidence section citing:
  - Fowler et al. (1999) for Dead Code as established code smell
  - Romano et al. (2018) for multi-study evidence: dead code harms comprehensibility
  - Borg et al. (2026) for clean, well-organized code improving agent reliability
  - Note that research covers dead code broadly; dead exports specifically have less direct research

Use `<span class="citation">(Author, Year)</span>` format for all inline citations.
Each metric should have at least 1 foundational (pre-2021) and 1 AI-era source.
  </action>
  <verify>
Run: `grep -c "citation" internal/output/descriptions.go | head -1`
Confirm: Citation count increased from baseline
Run: `grep -E "max_dir_depth|module_fanout|circular_deps|import_complexity|dead_exports" internal/output/descriptions.go | grep -c citation`
Confirm: Each C3 metric has inline citations visible
Run: `go build ./...` passes
  </verify>
  <done>All 5 C3 metrics have inline citations with Research Evidence sections following established pattern</done>
</task>

<task type="auto">
  <name>Task 2: Add C3 reference entries to citations.go</name>
  <files>internal/output/citations.go</files>
  <action>
Expand C3 section in researchCitations slice. Keep existing Gamma et al. (1994) and Parnas (1972) entries, add:

```go
// Add after existing C3 entries (Gamma, Parnas)
{
    Category:    "C3",
    Title:       "Structured Design",
    Authors:     "Stevens, Myers & Constantine",
    Year:        1974,
    URL:         "https://doi.org/10.1147/sj.132.0115",
    Description: "Original coupling and cohesion definitions; low coupling improves software quality",
},
{
    Category:    "C3",
    Title:       "A Metrics Suite for Object Oriented Design",
    Authors:     "Chidamber & Kemerer",
    Year:        1994,
    URL:         "https://doi.org/10.1109/32.295895",
    Description: "CBO metric: excessive coupling detrimental to modular design and reuse",
},
{
    Category:    "C3",
    Title:       "Agile Software Development: Principles, Patterns, and Practices",
    Authors:     "Martin",
    Year:        2003,
    URL:         "https://www.pearson.com/en-us/subject-catalog/p/agile-software-development-principles-patterns-and-practices/P200000009452",
    Description: "Acyclic Dependencies Principle and Stable Dependencies Principle (influential practitioner perspective)",
},
{
    Category:    "C3",
    Title:       "Large-Scale C++ Software Design",
    Authors:     "Lakos",
    Year:        1996,
    URL:         "https://www.pearson.com/store/p/large-scale-c-software-design/P200000009117",
    Description: "Techniques for eliminating cyclic dependencies; acyclic designs easier to test and maintain",
},
{
    Category:    "C3",
    Title:       "Circular Dependencies and Change-Proneness: An Empirical Study",
    Authors:     "Oyetoyan et al.",
    Year:        2015,
    URL:         "https://doi.org/10.1109/SANER.2015.7081834",
    Description: "Empirical evidence that circular dependencies correlate with higher change frequency",
},
{
    Category:    "C3",
    Title:       "Exploring the Structure of Complex Software Designs: An Empirical Study of Open Source and Proprietary Code",
    Authors:     "MacCormack et al.",
    Year:        2006,
    URL:         "https://doi.org/10.1287/mnsc.1060.0552",
    Description: "Design structure matrix analysis validates modularity benefits for maintainability",
},
{
    Category:    "C3",
    Title:       "Using Dependency Models to Manage Complex Software Architecture",
    Authors:     "Sangal et al.",
    Year:        2005,
    URL:         "https://doi.org/10.1145/1094855.1094915",
    Description: "DSM approach for specifying and enforcing architectural patterns like layering",
},
{
    Category:    "C3",
    Title:       "A Multi-Study Investigation into Dead Code",
    Authors:     "Romano et al.",
    Year:        2018,
    URL:         "https://doi.org/10.1109/TSE.2018.2842781",
    Description: "Dead code harms comprehensibility and maintainability; developers should avoid this smell",
},
{
    Category:    "C3",
    Title:       "M-score: An Empirically Derived Software Modularity Metric",
    Authors:     "Pisch et al.",
    Year:        2024,
    URL:         "https://doi.org/10.1145/3674805.3686697",
    Description: "Dependency density metrics correlate with project maintainability",
},
{
    Category:    "C3",
    Title:       "Refactoring: Improving the Design of Existing Code",
    Authors:     "Fowler et al.",
    Year:        1999,
    URL:         "https://martinfowler.com/books/refactoring.html",
    Description: "Dead Code as code smell; unused code increases cognitive load",
},
{
    Category:    "C3",
    Title:       "Code for Machines, Not Just Humans: Quantifying AI-Friendliness with Code Health Metrics",
    Authors:     "Borg et al.",
    Year:        2026,
    URL:         "https://arxiv.org/abs/2601.02200",
    Description: "Code health metrics including architecture predict AI agent reliability",
},
```

Note: Parnas (1972), Gamma et al. (1994), Fowler et al. (1999), Martin (2003), and Borg et al. (2026) exist in other category sections - add as C3 entries for category self-containment (same pattern as prior phases).
  </action>
  <verify>
Run: `grep -c "Category.*C3" internal/output/citations.go`
Confirm: At least 13 C3 citation entries (existing 2 + 11 new)
Run: `go build ./...` passes
  </verify>
  <done>C3 References section contains 13 entries covering foundational architecture research, empirical studies, and AI-era sources</done>
</task>

<task type="auto">
  <name>Task 3: Verify all C3 citation URLs are accessible</name>
  <files></files>
  <action>
Verify each C3 citation URL is accessible using curl with browser User-Agent (to bypass bot protection):

URLs to verify:
1. Parnas (1972): https://dl.acm.org/doi/10.1145/361598.361623
2. Gamma et al. (1994): https://en.wikipedia.org/wiki/Design_Patterns
3. Stevens et al. (1974): https://doi.org/10.1147/sj.132.0115
4. Chidamber & Kemerer (1994): https://doi.org/10.1109/32.295895
5. Martin (2003): https://www.pearson.com/en-us/subject-catalog/p/agile-software-development-principles-patterns-and-practices/P200000009452
6. Lakos (1996): https://www.pearson.com/store/p/large-scale-c-software-design/P200000009117
7. Oyetoyan et al. (2015): https://doi.org/10.1109/SANER.2015.7081834
8. MacCormack et al. (2006): https://doi.org/10.1287/mnsc.1060.0552
9. Sangal et al. (2005): https://doi.org/10.1145/1094855.1094915
10. Romano et al. (2018): https://doi.org/10.1109/TSE.2018.2842781
11. Pisch et al. (2024): https://doi.org/10.1145/3674805.3686697
12. Fowler et al. (1999): https://martinfowler.com/books/refactoring.html
13. Borg et al. (2026): https://arxiv.org/abs/2601.02200

Use: `curl -I -A "Mozilla/5.0" [URL]` to check HTTP status
For DOI URLs: Verify they resolve (302/301 redirect is success)
For ACM/IEEE: DOI format is permanent, 403 bot protection is expected for automated requests

Document any issues found. If a URL is inaccessible, find alternative (DOI preferred, then open-access version).
  </action>
  <verify>
All 13 URLs return HTTP 200 or 3xx redirect (DOI resolution)
No broken links
  </verify>
  <done>All C3 citation URLs verified accessible or DOI resolution confirmed</done>
</task>

</tasks>

<verification>
1. `go build ./...` passes
2. `go test ./internal/output/...` passes (if tests exist)
3. All 5 C3 metrics in descriptions.go have inline citations
4. At least 13 C3 entries in citations.go
5. All URLs verified accessible
</verification>

<success_criteria>
- All 5 C3 metrics have inline citations referencing foundational SE sources (Parnas 1972, Stevens et al. 1974) and modern replication studies
- C3 References section contains 13 complete citations with verified, accessible URLs
- Classic architecture principles are balanced with contemporary evidence
- Martin's principles (ADP, SDP) are labeled as influential practitioner perspective, not peer-reviewed research
- Every quantified claim in C3 metric descriptions has explicit source attribution
</success_criteria>

<output>
After completion, create `.planning/phases/21-c3-architecture/21-01-SUMMARY.md`
</output>
